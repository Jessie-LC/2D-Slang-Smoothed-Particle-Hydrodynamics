{
  "version": 3,
  "sources": ["pack.ts"],
  "sourcesContent": ["export function configureRenderer(renderer: RendererConfig): void {\n    renderer.sunPathRotation = 0.0;\n    renderer.ambientOcclusionLevel = 0.0;\n    renderer.mergedHandDepth = false;\n    renderer.disableShade = false;\n\n    renderer.render.sun = false;\n    renderer.render.horizon = false;\n    renderer.render.clouds = false;\n    renderer.render.moon = false;\n    renderer.render.vignette = false;\n    renderer.render.waterOverlay = false;\n    renderer.render.entityShadow = false;\n    renderer.render.stars = false;\n}\n\nconst numCellsX = 16;\nconst numCellsY = 16;\nconst cellCount = numCellsX * numCellsY;\n\nconst particleGroupSize = 64;\nconst particleGroupCount = 64;\nconst particleCount = particleGroupSize * particleGroupCount;\nconst particleBufferSize = 84 * particleCount;\n\nconst renderBufferWidth = 256;\nconst renderBufferHeight = 256;\nconst renderBufferSize = 8 * renderBufferWidth * renderBufferHeight;\n\nexport function configurePipeline(pipeline: PipelineConfig): void {\n    const mainTexture = pipeline.createTexture('mainTexture')\n                        .format(Format.RGBA16F)\n                        .width(renderBufferWidth)\n                        .height(renderBufferHeight)\n                        .mipmap(false)\n                        .build();\n\n    const globalDefines = pipeline.createExportList()\n                          .addInt('PARTICLE_COUNT', particleCount)\n                          .addInt('PARTICLE_GROUP_SIZE', particleGroupSize)\n                          .addInt('RENDER_WIDTH', renderBufferWidth)\n                          .addInt('RENDER_HEIGHT', renderBufferHeight)\n                          .build();\n\n    pipeline.setGlobalExport(globalDefines);\n\n    pipeline.createBuffer('particles', particleBufferSize, false);\n    pipeline.createBuffer('pixelbuffer', renderBufferSize, true);\n\n    const preRenderStage = pipeline.forStage(Stage.SCREEN_SETUP);\n\n    preRenderStage.createCompute('initialize-particles')\n    .location(\"programs/initialize.slang\", 'InitializeParticles')\n    .workGroups(particleGroupCount, 1, 1)\n    .compile();\n\n    preRenderStage.createCompute('initialize-density')\n    .location(\"programs/simulation/density.slang\", 'CalculateDensity')\n    .workGroups(particleGroupCount, 1, 1)\n    .compile();\n    preRenderStage.createCompute('initialize-gradh')\n    .location(\"programs/simulation/gradh.slang\", 'CalculateGradH')\n    .workGroups(particleGroupCount, 1, 1)\n    .compile();\n\n    preRenderStage.end();\n\n    const simulationStage = pipeline.forStage(Stage.PRE_RENDER);\n\n    //simulationStage.createCompute('calculate-acceleration-1')\n    //.location(\"programs/simulation/acceleration.slang\", 'calculateAcceleration')\n    //.workGroups(particleGroupCount, 1, 1)\n    //.compile();\n\n    simulationStage.createCompute('calculate-density-1')\n    .location(\"programs/simulation/density.slang\", 'CalculateDensity')\n    .workGroups(particleGroupCount, 1, 1)\n    .compile();\n    simulationStage.createCompute('calculate-gradh-1')\n    .location(\"programs/simulation/gradh.slang\", 'CalculateGradH')\n    .workGroups(particleGroupCount, 1, 1)\n    .compile();\n    simulationStage.createCompute('calculate-acceleration-1')\n    .location(\"programs/simulation/acceleration.slang\", 'CalculateAcceleration')\n    .workGroups(particleGroupCount, 1, 1)\n    .compile();\n    simulationStage.createCompute('calculate-velocity-1')\n    .location(\"programs/simulation/integrate-velocity.slang\", 'IntegrateVelocity')\n    .workGroups(particleGroupCount, 1, 1)\n    .compile();\n\n    simulationStage.createCompute('calculate-position')\n    .location(\"programs/simulation/integrate-position.slang\", 'IntegratePosition')\n    .workGroups(particleGroupCount, 1, 1)\n    .compile();\n\n    simulationStage.createCompute('calculate-density-2')\n    .location(\"programs/simulation/density.slang\", 'CalculateDensity')\n    .workGroups(particleGroupCount, 1, 1)\n    .compile();\n    simulationStage.createCompute('calculate-gradh-2')\n    .location(\"programs/simulation/gradh.slang\", 'CalculateGradH')\n    .workGroups(particleGroupCount, 1, 1)\n    .compile();\n    simulationStage.createCompute('calculate-acceleration-2')\n    .location(\"programs/simulation/acceleration.slang\", 'CalculateAcceleration')\n    .workGroups(particleGroupCount, 1, 1)\n    .compile();\n    simulationStage.createCompute('calculate-velocity-2')\n    .location(\"programs/simulation/integrate-velocity.slang\", 'IntegrateVelocity')\n    .workGroups(particleGroupCount, 1, 1)\n    .compile();\n\n    simulationStage.end();\n\n    const renderStage = pipeline.forStage(Stage.POST_RENDER);\n\n    renderStage.createCompute('draw-particles')\n    .location(\"programs/rendering/draw-particles.slang\", 'DrawParticles')\n    .workGroups(particleGroupCount, 1, 1)\n    .compile();\n\n    renderStage.createComposite('copy-pixelbuffer')\n    .location(\"programs/rendering/copy.slang\", 'CopyPixelbuffer')\n    .target(0, mainTexture)\n    .compile();\n\n    renderStage.end();\n\n    pipeline.createCombinationPass('programs/post/combination.slang')\n    .compile();\n}"],
  "mappings": "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",
  "names": []
}
